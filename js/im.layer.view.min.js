var typesHash=new Hashtable,dataXml;$(window).ready(function(){View.General.initialize();var a=Database.Photos.load();if(typesHash=Controller.Photos.load(a),dataXml=Database.Config.load(),View.General.menuCargar(dataXml),View.General.sloganLoad(dataXml),document.URL.toLowerCase().indexOf("detail.html")>0){var e=Comun.queryStringParamGet("gallery");if(Comun.queryStringParamValue(e))View.Detail.galeriaCargar(dataXml,e,Comun.queryStringParamGet("news"));else{var t=Comun.queryStringParamGet("news");Comun.queryStringParamValue(t)&&View.Detail.newsCargar(dataXml,t,Comun.queryStringParamGet("news"))}}else{var e=Comun.queryStringParamGet("gallery");if(Comun.queryStringParamValue(e)){View.Index.galeriaCargar(dataXml,e,Comun.queryStringParamGet("news"));var n=Comun.queryStringParamGet("index");if(Comun.queryStringParamValue(n)){var o=$("#"+n);View.General.imageValidar(o)&&View.General.nodoImagenLocalizar(dataXml,App.Constantes.origenInicio,e,n)}}else{var r=Comun.queryStringParamGet("folder");if(Comun.queryStringParamValue(r))View.Index.folderCargar(dataXml,r,Comun.queryStringParamGet("news"));else{var l=Comun.queryStringParamGet("multimedia");if(Comun.queryStringParamValue(l))View.Index.multimediaCargar(dataXml,l,Comun.queryStringParamGet("news"));else{var t=Comun.queryStringParamGet("news");Comun.queryStringParamValue(t)?View.Index.newsCargar(dataXml,t):(View.Index.lastCargar(dataXml),View.Index.homeCargar(dataXml))}}}}}),$(function(){var a=$(window),e=20;a.scroll(function(){a.scrollTop()<=e?$(".bar-goHead").addClass("hidden"):$(".bar-goHead").removeClass("hidden")})});var View={General:function(){return General={initialize:function(){lity();$("#titulo").text(App.Config.dataTextTitle),$("#subtitulo").text(App.Config.dataTextSubtitle.toLowerCase()),$("#annio").text(App.Config.annio),$("#version").text(App.Config.version)},menuCargar:function(a){a.find("config").each(function(){$(this).children().each(function(){var a=this;switch(a.nodeName){case"galleries":$(a).children().each(function(){var a=this;switch(a.nodeName){case"folder":var e=$(a).attr("name");$("<li><span class='fa "+App.Constantes.iconGalleries+"' /><a href='./index.html?folder="+Comun.htmlReplace(e)+"'>"+e+"</a></li>").appendTo("#menu");break;case"gallery":var e=$(a).attr("name");$("<li><span class='fa "+App.Constantes.iconGallery+"' /><a href='./index.html?gallery="+Comun.htmlReplace(e)+"'>"+e+"</a></li>").appendTo("#menu");break;case"multimedia":var e=$(a).attr("name");$("<li><span class='fa "+App.Constantes.iconVideo+"' /><a href='./index.html?multimedia="+Comun.htmlReplace(e)+"'>"+e+"</a></li>").appendTo("#menu")}})}})})},sloganLoad:function(a){var e=Controller.Config.sloganLoad(a),t=e.texto;$(t).appendTo("#slogan")},nodoImagenLocalizar:function(a,e,t,n){var o=0;a.find("gallery").each(function(){var a=$(this).attr("name");if(Comun.htmlReplace(a)==t&&$(this).children().each(function(){if(1==o)return!1;var a=Controller.Config.pathImagenComponer($(this),App.Config.separadorPathEnlace),r=$(this).attr("src").replace(".jpg","");return r==n?(View.General.imagenPreview(e,r,$(this).attr("width"),$(this).attr("height"),t,$(this).attr("caption"),a),o=1,!1):void 0}),1==o)return!1})},imagenPreview:function(a,e,t,n,o,r,l){switch(imageDialog=$("#dialog"),a){case App.Constantes.origenInicio:case App.Constantes.origenGaleria:capasPopUpAjustar("imagen"),imageTag=$("#image"),$("#shareme-popup").attr("data-url",App.Config.home+"?gallery="+o+"&index="+e),$("#shareme-popup").attr("data-text",App.Config.dataTextTitle+l+": "+r),$("#shareme-popup").attr("data-image",App.Config.home+"/images/"+e+".jpg");break;case App.Constantes.origenNews:capasPopUpAjustar("enlace"),imageTag=$("#image"),$("<a href='./index.html?gallery="+o+"'><span class='enlace-galeria'>Ver y compartir en &aacute;lbum<br />"+(l.length>50?l.substr(0,47)+"...":l)+"</span></a>").appendTo("#enlace")}var i="auto";t>$(window).width()&&(i=$(window).width()-10),imageTag.attr("src",App.Config.rutaImage+e+".jpg"),imageTag.load(function(){$("#dialog").dialog({modal:!0,resizable:!1,draggable:!1,width:i,minWidth:"300px",title:r})}),a!=App.Constantes.origenNews&&socialMediaPopup()},imageValidar:function(a){return void 0!=a}},General}(),Index:function(){var a=function(a,e,t){var n=$("<ul class='breadcrumb'>").insertBefore("#main");$(Comun.breadcrumbsEstablecer(e,t)).appendTo(n);var o="";if(void 0!=e&&""!=e){o=$(this).attr("name");var r="";r=void 0!=e.parent().attr("name")?App.Config.dataTextTitle+e.parent().attr("name")+":"+o:App.Config.dataTextTitle+o,$("#shareme").attr("data-url",window.location.href),$("#shareme").attr("data-text",App.Config.dataTextTitle+r),Comun.seoValoresEstablecer(e)}Cookies.bannerCookies()};return Index={homeCargar:function(a){$("#shareme").attr("data-url",App.Config.home),$("#shareme").attr("data-text",App.Config.dataTextTitle+App.Config.dataTextHome);for(var e=Controller.Config.allLoad(a),t=0;t<e.length;t++){var n=e[t][0].type;switch(n){case"gallery":var o=e[t][0].titulo,r=e[t][0].id.replace(".jpg",""),l=e[t][0].update,i=$("<div class='card p-1'>").appendTo("#tiles"),p=$("<div class='card-image'>").appendTo(i);$("<img class='card-img-top img-fluid' id='"+r+"' src='"+App.Config.rutaImage+r+".jpg' title='"+o+"' alt='Columnas Css' />").appendTo(p);var s=$("<div class='card-block'>").appendTo(i),d=$("<h4 class='card-title'>").appendTo(s);$("<span class='fa "+App.Constantes.iconGallery+"'></span>").appendTo(d),$("<span class='col-11'>"+o+"</span>").appendTo(d);var c=$("<p class='card-date card-text text-right'>").appendTo(s);$("<small class='text-muted'>"+Comun.dateFormat(l)+"</small>").appendTo(c),$(i).wrap("<a href='./index.html?gallery="+Comun.htmlReplace(o)+"'>");break;case"multimedia":var o=e[t][0].titulo,r=e[t][0].id.replace(".jpg",""),l=e[t][0].update,i=$("<div class='card p-1'>").appendTo("#tiles"),p=$("<div class='card-video'>").appendTo(i);$("<img class='card-img-top img-fluid' id='"+r+"' src='"+App.Config.rutaImage+r+".jpg' title='"+o+"' alt='Columnas Css' />").appendTo(p);var s=$("<div class='card-block'>").appendTo(i),d=$("<h4 class='card-title'>").appendTo(s);$("<span class='fa "+App.Constantes.iconVideo+"'></span>").appendTo(d),$("<span class='col-11'>"+o+"</span>").appendTo(d);var c=$("<p class='card-date card-text text-right'>").appendTo(s);$("<small class='text-muted'>"+Comun.dateFormat(l)+"</small>").appendTo(c),$(i).wrap("<a href='./index.html?multimedia="+Comun.htmlReplace(o)+"'>");break;case"folderImages":var o=e[t][0].titulo,r=e[t][0].id.replace(".jpg",""),l=e[t][0].update,m=e[t][0].thumbs,i=$("<div class='card p-1'>").appendTo("#tiles"),p=$("<div class='card-image'>").appendTo(i);$("<img class='card-img-top img-fluid' id='"+r+"' src='"+App.Config.rutaImage+r+".jpg' title='"+o+"' alt='Columnas Css' />").appendTo(p);var s=$("<div class='card-block'>").appendTo(i),d=$("<h4 class='card-title'>").appendTo(s);if($("<span class='fa "+App.Constantes.iconGalleries+"'></span>").appendTo(d),$("<span class='col-11'>"+o+"</span>").appendTo(d),m.length>0){var u,g=$("<div class='row thumbs'>").appendTo(s);for(u=0;u<m.length&&u<4;u++){var f=$("<div class='col-3'>").appendTo(g);$("<img class='img-fluid' src='"+App.Config.rutaThumb+m[u].id+"' title='"+m[u].titulo+"' alt='"+m[u].titulo+"'>").appendTo(f)}for(;u<4;){var f=$("<div class='col-3'>").appendTo(g);$("<img class='img-fluid' src='resources/000000000.png' alt='no imagen'>").appendTo(f),u++}}var c=$("<p class='card-date card-text text-right'>").appendTo(s);$("<small class='text-muted'>"+Comun.dateFormat(l)+"</small>").appendTo(c),$(i).wrap("<a href='./index.html?folder="+Comun.htmlReplace(o)+"'>");break;case"folderText":var o=e[t][0].titulo,l=e[t][0].update,m=e[t][0].thumbs,i=$("<div class='card p-1'>").appendTo("#tiles"),s=$("<div class='card-block'>").appendTo(i),d=$("<h4 class='card-title'>").appendTo(s);if($("<span class='fa "+App.Constantes.iconText+"'></span>").appendTo(d),$("<span class='col-11'>"+o+"</span>").appendTo(d),m.length>0)for(var C=$("<ul>").appendTo(s),u=0;u<m.length;u++){var h=m[u].titulo,v=$("<li>"+h+"</li>").appendTo(C);$(v).wrap("<a href='#' data-toggle='modal' data-target='."+Comun.htmlReplace(h)+"'>"),View.Index.createModal(a,Comun.htmlReplace(h))}var c=$("<p class='card-date card-text text-right'>").appendTo(s);$("<small class='text-muted'>"+Comun.dateFormat(l)+"</small>").appendTo(c);break;case"section":var o=e[t][0].titulo,l=e[t][0].update,i=$("<div class='card p-1'>").appendTo("#tiles"),s=$("<div class='card-block'>").appendTo(i),d=$("<h4 class='card-title'>").appendTo(s);$("<span class='fa "+App.Constantes.iconInfo+"'></span>").appendTo(d),$("<span class='col-11'>"+o+"</span>").appendTo(d);var c=$("<p class='card-date card-text text-right'>").appendTo(s);$("<small class='text-muted'>"+Comun.dateFormat(l)+"</small>").appendTo(c),$(i).wrap("<a href='#' data-toggle='modal' data-target='."+Comun.htmlReplace(o)+"'>"),View.Index.createModal(a,Comun.htmlReplace(o))}}Cookies.bannerCookies()},galeriaCargar:function(e,t,n){for(var o=Controller.Config.galleryLoad(e,t),r=0;r<o.length;r++){var l=o[r][0].id.replace(".jpg",""),i=o[r][0].titulo,p=o[r][0].infoimagen,s=o[r][0].format,d=o[r][0].stock,c=o[r][0].price,m=o[r][0].linkurl,u=o[r][0].update,g=$("<div class='card p-1'>").appendTo("#tiles"),f=$("<div class='card-image'>").appendTo(g);$("<img class='card-img-top img-fluid' id='"+l+"' src='"+App.Config.rutaImage+l+".jpg' title='"+i+"' alt='Columnas Css' />").appendTo(f);var C=$("<div class='secuencia' title='ver secuencia'>").appendTo(f);$("<span class='fa fa-chevron-left'>").appendTo(C),$("<span class='fa fa-chevron-right'>").appendTo(C),void 0!=n?$(f).wrap("<a href='./detail.html?gallery="+t+"&photo="+r+"&news="+n+"'>"):$(f).wrap("<a href='./detail.html?gallery="+t+"&photo="+r+"'>");var h=$("<div class='card-block'>").appendTo(g),v=$("<h4 class='card-title'>").appendTo(h);$("<span class='fa "+App.Constantes.iconImage+"'></span>").appendTo(v),$("<span class='col-11'>"+i+"</span>").appendTo(v);var T=($("<p class='card-text '>"+p+"</p>").appendTo(h),"");void 0!=s&&""!=s&&(T+=App.Constantes.dimesion+s),void 0!=d&&""!=d&&(T+=" "+d),void 0!=c&&""!=c&&(""!=T&&(T+="<br />"),T+=App.Constantes.copia+c+App.Constantes.moneda);var x=$("<p class='card-text text-left'>").appendTo(h);$("<small class='text-muted'>"+T+"</small>").appendTo(x);var w=$("<div class='card-text row justify-content-between'>").appendTo(h),y=$("<div class='col-4 text-left'>").appendTo(w);$(Comun.infoLinkTratar(m)).appendTo(y);var b=$("<p class='card-date card-text text-right'>").appendTo(w);$("<small class='text-muted'>"+Comun.dateFormat(u)+"</small>").appendTo(b)}a("",Controller.Config.galleryFind(e,t),n)},folderCargar:function(e,t,n){for(var o=Controller.Config.folderLoad(e,t),r=0;r<o.length;r++){var l=o[r][0].titulo,i=(o[r][0].id,o[r][0].id.replace(".jpg","")),p=o[r][0].update,s=$("<div class='card p-1'>").appendTo("#tiles"),d=$("<div class='card-image'>").appendTo(s);$("<img class='card-img-top img-fluid' id='"+i+"' src='"+App.Config.rutaImage+i+".jpg' title='"+l+"' alt='Columnas Css' />").appendTo(d),void 0!=n?$(d).wrap("<a href='./index.html?gallery="+Comun.htmlReplace(l)+"&news="+n+"'>"):$(d).wrap("<a href='./index.html?gallery="+Comun.htmlReplace(l)+"'>");var c=$("<div class='card-block'>").appendTo(s),m=$("<h4 class='card-title'>").appendTo(c);$("<span class='fa "+App.Constantes.iconGallery+"'></span>").appendTo(m),$("<span class='col-11'>"+l+"</span>").appendTo(m);var u=$("<p class='card-date card-text text-right'>").appendTo(c);$("<small class='text-muted'>"+Comun.dateFormat(p)+"</small>").appendTo(u)}a("",Controller.Config.folderFind(e,t),n)},multimediaCargar:function(e,t,n){for(var o=Controller.Config.multimediaLoad(e,t),r=0;r<o.length;r++){var l=o[r][0].id.replace(".jpg",""),i=o[r][0].titulo,p=o[r][0].infoimagen,s=(o[r][0].format,o[r][0].stock,o[r][0].price,o[r][0].linkurl),d=o[r][0].update,c=$("<div class='card p-1'>").appendTo("#tiles"),m=$("<div class='card-video'>").appendTo(c);$("<img class='card-img-top img-fluid' id='"+l+"' src='"+App.Config.rutaImage+l+".jpg' title='"+i+"' alt='Columnas Css' />").appendTo(m);var u=$("<div class='card-block'>").appendTo(c),g=$("<h4 class='card-title'>").appendTo(u);$("<span class='fa "+App.Constantes.iconVideo+"'></span>").appendTo(g),$("<span class='col-11'>"+i+"</span>").appendTo(g);var f=($("<p class='card-text '>"+p+"</p>").appendTo(u),$("<div class='card-text row justify-content-between'>").appendTo(u)),C=$("<div class='col-4 text-left'>").appendTo(f);$("<img src='./resources/youtube.png' style='width:14px!important;' title='publicado en youtube'/>").appendTo(C);var h=$("<p class='card-date card-text text-right'>").appendTo(f);$("<small class='text-muted'>"+Comun.dateFormat(d)+"</small>").appendTo(h),$(c).wrap("<a data-lity href='"+s+"'>")}a("",Controller.Config.multimediaFind(e,t),n)},lastCargar:function(a){var e=Controller.Config.newsLoad(a);e.sort(Comun.arrayDateSort);var t=e[0][0].titulo,n=e[0][0].id,o=n.replace(".jpg",""),r="video"==e[0][0].type?"card-video":"card-image",l=$("<div class='card p-1'>").appendTo("#tiles"),i=$("<div class='"+r+"'>").appendTo(l);$("<img class='card-img-top img-fluid' id='"+o+"' src='"+App.Config.rutaImage+o+".jpg' title='"+t+"' alt='Columnas Css' />").appendTo(i);var p=$("<div class='card-block'>").appendTo(l),s=$("<h4 class='card-title'>").appendTo(p);$("<span class='fa "+App.Constantes.iconNew+"'></span>").appendTo(s),$("<span class='col-11'>Lo &uacute;ltimo</span>").appendTo(s);var d=$("<p class='card-date card-text text-right'>").appendTo(p);$("<small class='text-muted'>"+Comun.dateFormat(e[0][0].update)+"</small>").appendTo(d),$(l).wrap("<a href='./index.html?news="+e[0][0].update+"'>")},newsCargar:function(e,t){var n=Controller.Config.newsLoad(e);n.sort(Comun.arrayDateSort),a("");for(var o=0,r=0;r<n.length-1&&r<App.Config.elemNuevos;r++){var l="video"==n[r][0].type?"card-video":"card-image",i=("video"==n[r][0].type?App.Constantes.iconVideo:App.Constantes.iconImage,"video"==n[r][0].type?n[r][0].titulo:"ver secuencia",$("<div class='card p-1'>").appendTo("#tiles")),p=$("<div class='"+l+"'>").appendTo(i);if($("<img class='card-img-top img-fluid' id='"+n[r][0].id.replace(".jpg","")+"' src='"+App.Config.rutaImage+n[r][0].id.replace(".jpg","")+".jpg' title='"+n[r][0].titulo+"' alt='Columnas Css' />").appendTo(p),"video"!=n[r][0].type){var s=$("<div class='secuencia' title='ver secuencia'>").appendTo(p);$("<span class='fa fa-chevron-left'>").appendTo(s),$("<span class='fa fa-chevron-right'>").appendTo(s)}var d=$("<div class='card-block'>").appendTo(i),c=$("<h4 class='card-title'>").appendTo(d);$("<span class='fa "+App.Constantes.icoImagen+"'></span>").appendTo(c),$("<span class='col-11'>"+n[r][0].titulo+"</span>").appendTo(c);var m=$("<div class='card-colection'>").appendTo(d),u=$("<p class='card-text '><span class='fa "+App.Constantes.iconColection+"'></span>ir a</p>").appendTo(m),g=$("<span>"+n[r][0].parentName+"</span>").appendTo(u),f=$("<div class='card-text row justify-content-between'>").appendTo(d);if("video"==n[r][0].type){$(p).wrap("<a data-lity='' href='"+n[r][0].linkurl+"'>"),$(g).wrap("<a href='./index.html?multimedia="+n[r][0].parentFolder+"&news="+t+"'>");var C=$("<div class='col-4 text-left'>").appendTo(f);$("<img src='./resources/youtube.png' style='width:14px!important;' title='publicado en youtube'/>").appendTo(C)}else{$(p).wrap("<a href='./detail.html?news="+t+"&photo="+o+"'>"),$(g).wrap("<a href='./index.html?gallery="+n[r][0].parentFolder+"&news="+t+"'>");var C=$("<div class='col-4 text-left'>").appendTo(f);$(Comun.infoLinkTratar(n[r][0].linkurl)).appendTo(C),o++}var h=$("<p class='card-date card-text text-right'>").appendTo(f);$("<small class='text-muted'>"+Comun.dateFormat(n[r][0].update)+"</small>").appendTo(h)}},createModal:function(a,e){var t=Controller.Config.modalLoad(a,e),n=t.titulo.toUpperCase(),o=t.texto,r=$("<div class='modal fade "+e+"' tabindex='-1' role='dialog' aria-labelledby='myLargeModalLabel' aria-hidden='true'>").appendTo("#main"),l=$("<div class='modal-dialog modal-lg'>").appendTo(r),i=$("<div class='modal-content'>").appendTo(l),p=$("<div class='modal-header'>").appendTo(i);$("<h5 class='modal-title'>"+n+"</h5>").appendTo(p);var s=$("<button type='button' class='close' data-dismiss='modal' aria-label='Close'>").appendTo(p);$("<span aria-hidden='true'>&times;</span>").appendTo(s);var d=$("<div class='modal-body'>").appendTo(i);$(o).appendTo(d),$("<div class='modal-footer'>").appendTo(i)}},Index}(),Detail:function(){var a=function(a,t,n){var o=$("<ul class='breadcrumb'>").insertBefore("#main");$(Comun.breadcrumbsEstablecer(t,n)).appendTo(o);var r="";if(""!=t){r=$(this).attr("name");var l="";l=void 0!=t.parent().attr("name")?App.Config.dataTextTitle+t.parent().attr("name")+":"+r:App.Config.dataTextTitle+r,Comun.seoValoresEstablecer(t)}var i=1e3,p=Comun.queryStringParamGet("gallery");void 0==n||""==n||""!=p&&void 0!=p||(i=App.Config.elemNuevos);for(var s=0;s<a.length&&s<i;s++){var d=a[s][0].id.replace(".jpg",""),c=a[s][0].titulo,m=a[s][0].height,u=a[s][0].width,g=e(Comun.queryStringParamGet("photo"),s);$("<div class='carousel-item "+g+"'><img class='d-block img-fluid' id='"+d+"' src='"+App.Config.rutaImage+d+".jpg' height='"+m+"' width='"+u+"' title='"+c+"' alt='First slide'></div>").appendTo("#carouselInner"),$("<li data-target='#carouselSlides' class='"+g+"' data-slide-to='"+s+"'></li>").appendTo("#carouselIndicators")}Cookies.bannerCookies()},e=function(a,e){return void 0!=a&&""!=a&&$.isNumeric(a)?parseInt(a)==e?" active":"":0==e?" active":""};return Detail={galeriaCargar:function(e,t,n){e.find("gallery").each(function(){var e=$(this).attr("name");if(Comun.htmlReplace(e)==t){var o=new Array,r=0;$(this).children().each(function(){var a=$(this).attr("id"),e=typesHash.get(a);if(null!=e){var t=e.SRC,n=e.UPDATE,l=e.PUBLIC,i=e.CAPTION,p=e.LINKURL,s=e.INFOTEXT,d=e.WIDTH,c=e.HEIGHT;o[r]=[{id:t,update:n,public:l,titulo:i,linkurl:p,infoimagen:s,width:d,height:c}],r++}}),a(o,$(this),n)}})},newsCargar:function(e,t,n){var o=new Array,r=0;e.find("img").each(function(){var a=$(this).attr("id"),e=typesHash.get(a);if(null!=e){var t=e.SRC,n=e.UPDATE,l=e.PUBLIC,i=e.CAPTION,p=e.LINKURL,s=e.INFOTEXT,d=e.WIDTH,c=e.HEIGHT,m=Comun.htmlReplace($(this).parent().attr("name")),u=Controller.Config.pathImagenComponer($(this),App.Config.separadorPathPanel);o[r]=[{id:t,update:n,public:l,titulo:i,linkurl:p,infoimagen:s,width:d,height:c,parentFolder:m,parentName:u}],r++}}),o.sort(Comun.arrayDateSort),a(o,"",n)}},Detail}()};