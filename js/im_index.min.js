var typesHash=new Hashtable;$(window).ready(function(){initialize(),imagenesCargar(typesHash),$(window).width()<App.Config.windowWidthStd&&($(".header-texto").css({margin:"0.5% 0 0 0"}),$(".header-texto-titulo").css({margin:"-2% 0 -0.2% 2%"}),$(".header-texto-titulo").css({"font-size":"175%"}),$(".header-texto-subtitulo").css({margin:"0 2%"}),$(".header-texto-subtitulo").css({"font-size":"65%"}));var a=queryStringParamGet("gallery");if(queryStringParamValue(a)){galeriaCargar(a,queryStringParamGet("news"));var b=queryStringParamGet("index");if(queryStringParamValue(b)){var c=$("#"+b);imageValidar(c)&&nodoImagenLocalizar(App.Constantes.origenInicio,a,b)}}else{var d=queryStringParamGet("folder");if(queryStringParamValue(d))folderCargar(d,queryStringParamGet("news"));else{var e=queryStringParamGet("multimedia");if(queryStringParamValue(e))multimediaCargar(e,queryStringParamGet("news"));else{var f=queryStringParamGet("news");queryStringParamValue(f)?newsCargar(f):newsMostrar()}}}}),initialize=function(){$("#annio").text(App.Config.annio),$("#version").text(App.Config.version),$(".header-logo").wrap("<a href='./index.html'>")},gridEstablecer=function(){var a=App.Config.elemWidthStd,b=App.Config.elemOffsetStd;$(window).width()<App.Config.windowWidthStd&&($("#tiles li").css({width:"130px"}),a=App.Config.elemWidthSpe,b=App.Config.elemOffsetSpe,$("#tiles li p").css({"font-size":"70%"}),$(".panel-section ul").css({"font-size":"70%"}),$(".datos p").css({"font-size":"65%!important"})),function(){var d;imagesLoaded("#tiles",function(){d=new Wookmark("#tiles",{autoresize:App.Config.autoResize,itemWidth:a,offset:b}),bannerCookies(),socialMediaPrincipal()})}()},imageValidar=function(a){return void 0!=a?!0:!1},imagenPreview=function(a,b,c,d,e,f,g){switch(imageDialog=$("#dialog"),a){case App.Constantes.origenInicio:case App.Constantes.origenGaleria:capasPopUpAjustar("imagen"),imageTag=$("#image"),$("#shareme-popup").attr("data-url",App.Config.home+"?gallery="+e+"&index="+b),$("#shareme-popup").attr("data-text",App.Config.dataTextTitle+g+": "+f),$("#shareme-popup").attr("data-image",App.Config.home+"/images/"+b+".jpg");break;case App.Constantes.origenNews:capasPopUpAjustar("enlace"),imageTag=$("#image"),$("<a href='./index.html?gallery="+e+"'><span class='enlace-galeria'>Ver y compartir en &aacute;lbum<br />"+(g.length>50?g.substr(0,47)+"...":g)+"</span></a>").appendTo("#enlace")}var h="auto";c>$(window).width()&&(h=$(window).width()-10),imageTag.attr("src",App.Config.rutaImage+b+".jpg"),imageTag.load(function(){$("#dialog").dialog({modal:!0,resizable:!1,draggable:!1,width:h,minWidth:"300px",title:f})}),a!=App.Constantes.origenNews&&socialMediaPopup()},textPreview=function(a){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"html",success:function(b){capasPopUpAjustar("texto"),$(b).find("section").each(function(){var b=$(this).attr("NAME");if(htmlReplace(b)==a){var c="",d="";c=$(this).find("title").text(),$(this).children().each(function(){var a=this;switch(a.nodeName.toLowerCase()){case"p":d+="<p>"+$(a).html()+"</p>";break;case"ul":d+="<ul>",$(a).find("li").each(function(){var a=this;d+="<li>"+$(a).html()+"</li>"}),d+="</ul>"}}),imageDialog=$("#dialog"),txtTag=$("#texto"),$(txtTag).empty(),$(txtTag).html(d);var e="60%";$(window).width()<App.Config.windowWidthStd&&(e="90%",$("#texto").css({"font-size":"90%"})),$("#dialog").dialog({modal:!0,resizable:!1,draggable:!1,width:e,title:c})}})}})},galeriaCargar=function(a,b){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(c){$(c).find("gallery").each(function(){var c=$(this).attr("NAME");if(htmlReplace(c)==a){var d="";void 0!=$(this).parent().attr("NAME")?($(".backbottom").html(breadcrumbsEstablecer($(this),b)),d=App.Config.dataTextTitle+$(this).parent().attr("NAME")+":"+c):($(".backbottom").html(breadcrumbsEstablecer($(this),b)),d=App.Config.dataTextTitle+c),$(".backbottom").css({display:"block"}),$("#shareme").attr("data-url",window.location.href),$("#shareme").attr("data-text",App.Config.dataTextTitle+d),seoValoresEstablecer($(this));var e=0;$(this).children().each(function(){var c=$(this).attr("ID"),d=typesHash.get(c);if(null!=d){var f=d.SRC.replace(".jpg",""),g=d.CAPTION,h=d.INFOTEXT,i=d.FORMAT,j=d.STOCK,k=d.PRICE,n=(d.LINKURL,d.UPDATE,$("<li>").appendTo("#tiles")),o=$("<div class='panel'>").appendTo(n),p=$("<img class='panel-imagen' id='"+f+"' style='cursor:pointer' src='"+App.Config.rutaImage+f+".jpg' title='"+g+"' alt='Columnas Css' />").appendTo(o);$("<p><span class='panel-titulo'>"+g+". </span><span class='panel-descripcion'>"+h+"</span></p>").appendTo(n);var q="";void 0!=i&&""!=i&&(q+=App.Constantes.dimesion+i),void 0!=j&&""!=j&&(q+=" "+j),void 0!=k&&""!=k&&(""!=q&&(q+="<br />"),q+=App.Constantes.copia+k+App.Constantes.moneda),$("<p class='panel-format'>"+q+"</p>").appendTo(n);var r=$("<div class='datos'>").appendTo(n),s=$("<div class='datos-social'>").appendTo(r);$(infoLinkTratar(d.LINKURL)).appendTo(s),$("<p>"+dateFormat(d.UPDATE)+"</p>").appendTo(r),void 0!=b?$(p).wrap("<a href='./detail.html?gallery="+a+"&photo="+e+"&news="+b+"'>"):$(p).wrap("<a href='./detail.html?gallery="+a+"&photo="+e+"'>"),e++}}),gridEstablecer()}})}})},folderCargar=function(a,b){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(c){$(c).find("folder").each(function(){var c=$(this).attr("NAME");htmlReplace(c)==a&&($("#shareme").attr("data-url",window.location.href),$("#shareme").attr("data-text",App.Config.dataTextTitle+c),$(".backbottom").html(breadcrumbsEstablecer($(this),b)),$(".backbottom").css({display:"block"}),seoValoresEstablecer($(this)),$(this).children().each(function(){var a=this;if("gallery"==a.nodeName){var c=$(a).attr("NAME"),e=($(a).attr("SRC"),$(a).attr("SRC").replace(".jpg","")),f=$("<li>").appendTo("#tiles"),g=$("<div class='panel'>").appendTo(f);$("<img class='panel-imagen' id='"+e+"' src='"+App.Config.rutaImage+e+".jpg' title='"+c+"' alt='Columnas Css' />").appendTo(g),$("<p><img class='panel-literal-img' src='./resources/flecha.png'/><span class='panel-literal'>"+App.Config.marcaGaleria+"</span><span class='panel-titulo'>"+c+"</span></p>").appendTo(f);var h=$("<div class='datos'>").appendTo(f);$("<p>"+dateFormat($(a).attr("UPDATE"))+"</p>").appendTo(h),void 0!=b?$(g).wrap("<a href='./index.html?gallery="+htmlReplace(c)+"&news="+b+"'>"):$(g).wrap("<a href='./index.html?gallery="+htmlReplace(c)+"'>")}}),gridEstablecer())})}})},multimediaCargar=function(a,b){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(c){$(c).find("multimedia").each(function(){var c=$(this).attr("NAME");if(htmlReplace(c)==a){var d="";void 0!=$(this).parent().attr("NAME")?($(".backbottom").html(breadcrumbsEstablecer($(this),b)),d=App.Config.dataTextTitle+$(this).parent().attr("NAME")+":"+c):($(".backbottom").html(breadcrumbsEstablecer($(this),b)),d=App.Config.dataTextTitle+c),$(".backbottom").css({display:"block"}),$("#shareme").attr("data-url",window.location.href),$("#shareme").attr("data-text",App.Config.dataTextTitle+d),seoValoresEstablecer($(this));var e=0;$(this).children().each(function(){var a=$(this).attr("ID"),c=typesHash.get(a);if(null!=c){var d=c.SRC.replace(".jpg",""),f=c.CAPTION,g=c.INFOTEXT,h=c.FORMAT,i=c.STOCK,j=c.PRICE,k=c.LINKURL,m=(c.UPDATE,$("<li>").appendTo("#tiles")),n=$("<div class='panel video'>").appendTo(m),o=$("<img class='panel-imagen' id='"+d+"' style='cursor:pointer' src='"+App.Config.rutaImage+d+".jpg' title='"+f+"' alt='Columnas Css' />").appendTo(n);$("<p><span class='panel-titulo'>"+f+". </span><span class='panel-descripcion'>"+g+"</span></p>").appendTo(m);var p="";void 0!=h&&""!=h&&(p+=App.Constantes.dimesion+h),void 0!=i&&""!=i&&(p+=" "+i),void 0!=j&&""!=j&&(""!=p&&(p+="<br />"),p+=App.Constantes.copia+j+App.Constantes.moneda),$("<p class='panel-format'>"+p+"</p>").appendTo(m);var q=$("<div class='datos'>").appendTo(m),r=$("<div class='datos-social'>").appendTo(q);$(infoLinkTratar(c.LINKURL)).appendTo(r),$("<p>"+dateFormat(c.UPDATE)+"</p>").appendTo(q),void 0!=b?$(o).wrap("<a data-lity='' href='"+k+"' title='"+f+"'>"):$(o).wrap("<a data-lity='' href='"+k+"' title='"+f+"'>"),e++}}),gridEstablecer()}})}})},homeCargar=function(){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(a){$("#shareme").attr("data-url",App.Config.home),$("#shareme").attr("data-text",App.Config.dataTextTitle+App.Config.dataTextHome),$("#main").css({"padding-top":"0.6rem"}),$(a).find("config").each(function(){seoValoresEstablecer($(this)),$(this).children().each(function(){var a=this;switch(a.nodeName){case"galleries":$(a).children().each(function(){var a=this;switch(a.nodeName){case"folder":var b=$(a).attr("NAME"),d=($(a).attr("SRC"),$(a).attr("SRC").replace(".jpg","")),e=$("<li>").appendTo("#tiles"),f=$("<div class='panel'>").appendTo(e);if($("<img class='panel-imagen' id='"+d+"' src='"+App.Config.rutaImage+d+".jpg' title='"+b+"' alt='Columnas Css' />").appendTo(f),$("<p><img class='panel-literal-img' src='./resources/flechadoble.png'/><span class='panel-literal'>"+App.Config.marcaColeccion+"</span><span class='panel-titulo'>"+b+"</span></p>").appendTo(e),$(a).find("gallery").size()>0){var g=$("<div class='panel-thumb'>").appendTo(e),h=0;for($(a).children().each(function(){var a=this;if("gallery"==a.nodeName&&4>h){var b=$("<div class='panel-thumb-imagen'>").appendTo(g);$("<img class='panel-thumbs' src='"+App.Config.rutaThumb+$(a).attr("SRC")+"' title='"+$(a).attr("NAME")+"' alt='"+$(a).attr("NAME")+"'>").appendTo(b),h++}});4>h;){var i=$("<div class='panel-thumb-imagen'>").appendTo(g);$("<img class='panel-thumbs' src='resources/000000000.png' alt='no imagen'>").appendTo(i),h++}}var j=$("<div class='datos'>").appendTo(e);$("<p>"+dateFormat($(a).attr("UPDATE"))+"</p>").appendTo(j),$(f).wrap("<a href='./index.html?folder="+htmlReplace(b)+"'>");break;case"gallery":var b=$(a).attr("NAME"),d=($(a).attr("SRC"),$(a).attr("SRC").replace(".jpg","")),e=$("<li>").appendTo("#tiles"),f=$("<div class='panel'>").appendTo(e);$("<img class='panel-imagen' id='"+d+"' src='"+App.Config.rutaImage+d+".jpg' title='"+b+"' alt='Columnas Css' />").appendTo(f),$("<p><img class='panel-literal-img' src='./resources/flecha.png'/><span class='panel-literal'>"+App.Config.marcaGaleria+"</span><span class='panel-titulo'>"+b+"</span></p>").appendTo(e);var j=$("<div class='datos'>").appendTo(e);$("<p>"+dateFormat($(a).attr("UPDATE"))+"</p>").appendTo(j),$(f).wrap("<a href='./index.html?gallery="+htmlReplace(b)+"'>");break;case"multimedia":var b=$(a).attr("NAME"),d=($(a).attr("SRC"),$(a).attr("SRC").replace(".jpg","")),e=$("<li>").appendTo("#tiles"),f=$("<div class='panel video'>").appendTo(e);$("<img class='panel-imagen' id='"+d+"' src='"+App.Config.rutaImage+d+".jpg' title='"+b+"' alt='Columnas Css' />").appendTo(f),$("<p><img class='panel-literal-img' src='./resources/multimedia.png'/><span class='panel-literal'>"+App.Config.marcaGaleria+"</span><span class='panel-titulo'>"+b+"</span></p>").appendTo(e);var j=$("<div class='datos'>").appendTo(e);$("<p>"+dateFormat($(a).attr("UPDATE"))+"</p>").appendTo(j),$(f).wrap("<a href='./index.html?multimedia="+htmlReplace(b)+"'>")}}),$("<a type='application/rss+xml' href='./feed.xml' target='_blank'><img src='./resources/rss.png'></a>").appendTo("#rss");break;case"folder":var b=$(a).attr("NAME"),c=$("<li>").appendTo("#tiles"),d=$("<div class='panel-section'>").appendTo(c),e=$("<p><b>"+b+"</b></p>").appendTo(d);if($(a).find("section").size()>0){var f=$("<ul>").appendTo(d);$(a).children().each(function(){if("section"==this.nodeName){var a=$("<li>"+$(this).attr("NAME")+"</li>").appendTo(f),b=$(this);a.click(function(a){a.preventDefault(),textPreview(htmlReplace(b.attr("NAME")))})}})}var g=$("<div class='datos'>").appendTo(c);$("<p>"+dateFormat($(a).attr("UPDATE"))+"</p>").appendTo(g);break;case"section":var b=$(a).attr("NAME"),c=$("<li>").appendTo("#tiles"),d=$("<div class='panel-section'>").appendTo(c),e=$("<p style='cursor:pointer'><b>"+b+"</b></p>").appendTo(d);e.click(function(b){b.preventDefault(),textPreview(htmlReplace($(a).attr("NAME")))});var g=$("<div class='datos'>").appendTo(c);$("<p>"+dateFormat($(a).attr("UPDATE"))+"</p>").appendTo(g)}})}),gridEstablecer()}})},newsMostrar=function(){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(a){var b=new Array,c=0;$(a).find("img").each(function(){var a=$(this).attr("ID"),d=typesHash.get(a);if(null!=d){var e=d.SRC,f=d.PUBLIC,g=d.UPDATE,h=d.CAPTION;b[c]=[{id:e,update:g,"public":f,titulo:h,type:"imagen"}],c++}}),$(a).find("vid").each(function(){var a=$(this).attr("ID"),d=typesHash.get(a);if(null!=d){var e=d.SRC,f=d.PUBLIC,g=d.UPDATE,h=d.CAPTION;b[c]=[{id:e,update:g,"public":f,titulo:h,type:"video"}],c++}}),b.sort(arrayDateSort);var d=b[0][0].titulo,e=b[0][0].id,f=e.replace(".jpg",""),g="video"==b[0][0].type?"video":"",h=$("<li>").appendTo("#tiles"),i=$("<div class='panel "+g+"'>").appendTo(h);$("<img class='panel-imagen' id='"+f+"' src='"+App.Config.rutaImage+f+".jpg' title='"+d+"' alt='Columnas Css' />").appendTo(i),$("<p><img class='panel-literal-img' src='./resources/nuevo.png'/><span class='panel-literal'>"+App.Config.marcaGaleria+"</span><span class='panel-titulo'>Lo &uacute;ltimo</span></p>").appendTo(h);var j=$("<div class='datos'>").appendTo(h);$("<p>"+dateFormat(b[0][0].update)+"</p>").appendTo(j),$(i).wrap("<a href='./index.html?news="+b[0][0].update+"'>"),homeCargar()}})},newsCargar=function(a){$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(b){$(".backbottom").html("<a href='./index.html'>inicio</a> | lo &uacute;ltimo"),$(".backbottom").css({display:"block"});var c=new Array,d=0;$(b).find("img").each(function(){var a=$(this).attr("ID"),b=typesHash.get(a);if(null!=b){var e=b.SRC,f=b.UPDATE,g=b.PUBLIC,h=b.CAPTION,i=b.LINKURL,j=b.INFOTEXT,k=htmlReplace($(this).parent().attr("NAME")),l=pathImagenComponer($(this),App.Config.separadorPathPanel);c[d]=[{id:e,update:f,"public":g,titulo:h,linkurl:i,infoimagen:j,parentFolder:k,parentName:l,type:"imagen"}],d++}}),$(b).find("vid").each(function(){var a=$(this).attr("ID"),b=typesHash.get(a);if(null!=b){var e=b.SRC,f=b.UPDATE,g=b.PUBLIC,h=b.CAPTION,i=b.LINKURL,j=b.INFOTEXT,k=htmlReplace($(this).parent().attr("NAME")),l=pathImagenComponer($(this),App.Config.separadorPathPanel);c[d]=[{id:e,update:f,"public":g,titulo:h,linkurl:i,infoimagen:j,parentFolder:k,parentName:l,type:"video"}],d++}}),c.sort(arrayDateSort);for(var e=0,f=0;f<c.length-1&&f<App.Config.elemNuevos;f++){var g="video"==c[f][0].type?"video":"",h="video"==c[f][0].type?"multimedia.png":"flecha.png",i=$("<li>").appendTo("#tiles"),j=$("<div class='panel "+g+"'>").appendTo(i),k=$("<img class='panel-imagen' name='"+c[f][0].parentFolder+"' id='"+c[f][0].id.replace(".jpg","")+"' style='cursor:pointer' src='"+App.Config.rutaImage+c[f][0].id.replace(".jpg","")+".jpg' title='"+c[f][0].titulo+"' alt='Columnas Css' />").appendTo(j);$("<p><span class='panel-titulo'>"+c[f][0].titulo+". </span><span class='panel-descripcion'>"+c[f][0].infoimagen+"</span></p>").appendTo(i);var l;$("<p><img class='panel-literal-img' src='./resources/"+h+"'/><span class='panel-parent'>"+c[f][0].parentName+"</span></p>").appendTo(i);var m=$("<div class='datos'>").appendTo(i);if("video"==c[f][0].type)$(k).wrap("<a data-lity='' href='"+c[f][0].linkurl+"' title='"+c[f][0].titulo+"'>"),$(l).wrap("<a href='./index.html?multimedia="+c[f][0].parentFolder+"&news="+a+"'>");else{$(k).wrap("<a href='./detail.html?news="+a+"&photo="+e+"'>"),$(l).wrap("<a href='./index.html?gallery="+c[f][0].parentFolder+"&news="+a+"'>");var n=$("<div class='datos-social'>").appendTo(m);$(infoLinkTratar(c[f][0].linkurl)).appendTo(n),e++}$("<p>"+dateFormat(c[f][0].update)+"</p>").appendTo(m)}gridEstablecer()}})},pathImagenComponer=function(a,b){for(var c=a,d="",e=0;void 0!=c.parent().attr("NAME");)d=c.parent().attr("NAME")+(0!=e?b+d:""),e++,c=c.parent();return d},nodoImagenLocalizar=function(a,b,c){var d=0;$.ajax({type:"GET",url:App.Config.rutaCnf,dataType:"xml",success:function(e){$(e).find("gallery").each(function(){var e=$(this).attr("NAME");return htmlReplace(e)==b&&$(this).children().each(function(){if(1==d)return!1;var e=pathImagenComponer($(this),App.Config.separadorPathEnlace),f=$(this).attr("SRC").replace(".jpg","");return f==c?(imagenPreview(a,f,$(this).attr("WIDTH"),$(this).attr("HEIGHT"),b,$(this).attr("CAPTION"),e),d=1,!1):void 0}),1==d?!1:void 0})}})};